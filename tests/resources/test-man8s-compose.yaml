services:
  test_container:
    image: docker.io/example/somecontainer:latest
    container_name: test_container
    hostname: test_container
    networks:
    - man8yggbr
    ports:
    - 9000:9000
    - '[::]:9000:9000'
    - 9001:9001
    - '[::]:9001:9001'
    - 114514:1919810/udp
    - '[::]:114514:1919810/udp'
    volumes:
    - /var/lib/man8s/data/test_container/data:/data
    - /var/lib/man8s/data/test_container/data2:/data2
    - /mnt/data/rustfs:/data3
    - None:/shared-data
    - /var/lib/man8s/log/test_container/log:/log
    - /var/lib/man8s/conf/test_container/etc/example_config:/etc/example_config
    - /var/lib/man8s/conf/test_container/etc/some_big:/etc/some_big
    environment:
      RUSTFS_ACCESS_KEY: rustfsadmin
      RUSTFS_SECRET_KEY: rustfsadmin
      RUSTFS_VOLUMES: /data/rustfs0
      RUSTFS_ADDRESS: :9000
      RUSTFS_CONSOLE_ENABLE: 'true'
      RUST_LOG: error
      RUSTFS_OBS_LOG_DIRECTORY: /log/
    restart: unless-stopped
    extra_hosts:
      my-dns-server.man8s.local: 300:6b9f:cca2:a583:a185:8936:da18:75a5
      test-nginx-1.man8s.local: 300:6b9f:cca2:a583:a185:8936:da18:75a5
      test_container.man8s.local: 300:6b9f:cca2:a583:a185:8936:da18:75a5
networks:
  man8yggbr:
    external: true
